(this["webpackJsonpbots-as-a-service"]=this["webpackJsonpbots-as-a-service"]||[]).push([[0],{120:function(e,a,t){e.exports=t(131)},125:function(e,a,t){},131:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(12),c=t.n(l),i=(t(125),t(210)),o=t(97),s=t(211),m=t(95),u=t(37),d=t(10),h=t(177),p=t(180),b=t(181),E=t(98),g=t(182),v=Object(h.a)((function(e){return{appBar:{position:"relative",marginBottom:e.spacing(5)},title:{flexGrow:1},menuButton:{margin:e.spacing(1)}}}));function f(e){var a=v();function t(e){var a="text",t=!1,n="text",r=!1;switch(e){case"#/bots":a="outlined",t=!0;break;case"#/create":n="outlined",r=!0}return{bots:{variant:a,disabled:t},create:{variant:n,disabled:r}}}var l=t(window.location.hash),c=Object(n.useState)(l),i=Object(d.a)(c,2),o=i[0],s=i[1];return r.a.createElement(p.a,{position:"absolute",color:"default",className:a.appBar},r.a.createElement(b.a,null,r.a.createElement(E.a,{variant:"h6",color:"inherit",noWrap:!0,className:a.title},"bots-as-a-service"),r.a.createElement(g.a,{className:a.menuButton,color:"inherit",href:"#/bots",variant:o.bots.variant,disabled:o.bots.disabled,onClick:function(){return s(t("#/bots"))}},"bots"),r.a.createElement(g.a,{className:a.menuButton,color:"inherit",href:"#/create",variant:o.create.variant,disabled:o.create.disabled,onClick:function(){return s(t("#/create"))}},"create")))}var y=Object(h.a)((function(e){return{attribution:{marginTop:e.spacing(5)}}}));function j(){var e=y();return r.a.createElement(E.a,{variant:"body2",color:"textSecondary",align:"center",className:e.attribution},"created and maintained for csci-5828, team 10")}var O=t(39),k=t(204),w=t(132),x=t(218),S=t(205),N=t(215),I=t(45),C=t(46),T=t(50),B=t(47),F=t(19),D=t(51),q=t(187),A=t(212),_=t(190),R=t(219),z=t(214),H=t(89),P=t(183),G=t(222),M=t(184),W=t(185),J=t(186),L=t(216),U=Object(h.a)((function(e){return{root:{display:"flex"},formControl:{margin:e.spacing(3)}}}));function Y(){var e=U(),a=r.a.useState({subreddits:!0,livethreads:!1}),t=Object(d.a)(a,2),n=t[0],l=t[1],c=function(e){return function(a){l(Object(H.a)({},n,Object(O.a)({},e,a.target.checked)))}},i=n.subreddits,o=n.livethreads,s=0===[i,o].filter((function(e){return e})).length;return r.a.createElement("div",{className:e.root},r.a.createElement(G.a,{required:!0,error:s,component:"fieldset",className:e.formControl},r.a.createElement(P.a,{component:"legend"},"triggers"),r.a.createElement(M.a,null,r.a.createElement(W.a,{control:r.a.createElement(L.a,{checked:i,onChange:c("subreddits"),value:"subreddits"}),label:"subreddits",disabled:!0}),r.a.createElement(W.a,{control:r.a.createElement(L.a,{checked:o,onChange:c("livethreads"),value:"livethreads"}),label:"livethreads (not yet implemented)",disabled:!0})),r.a.createElement(J.a,null,"what to trigger your bot on. must check at least one option.")))}var $=function(e){function a(e){var t;return Object(I.a)(this,a),t=Object(T.a)(this,Object(B.a)(a).call(this,e)),void 0===e.payload||e.payload==={}?t.state={botData:{},nameInput:{val:"coolbot",hasError:!1,helperText:"the name of your bot."},typeInput:{hasError:!1},subredditInput:{hasError:!0,helperText:"one or more subreddits to operate in. press enter in between entries.",val:null}}:t.state=e.payload,t.onNameInputChange=t.onNameInputChange.bind(Object(F.a)(t)),t.onSubredditInputChange=t.onSubredditInputChange.bind(Object(F.a)(t)),t}return Object(D.a)(a,e),Object(C.a)(a,[{key:"onNameInputChange",value:function(e){var a=e.target.value,t=!1,n="the name of your bot.";a.length>64?(t=!0,n="your name is too long (must be < 64 chars)."):/[^\d\w-]/.test(a)?(t=!0,n="you can only use alphanumeric characters, dash (-), or underscope (_)."):(t=!1,n="the name of your bot.");var r=Object.assign({},this.state);r.nameInput={hasError:t,helperText:n,val:t?"":a},this.setState(r)}},{key:"onSubredditInputChange",value:function(e,a,t){var n=Object.assign({},this.state),r=0===a.length;n.subredditInput.hasError=r,n.subredditInput.val=r?null:a,this.setState(n)}},{key:"returnDataOrNull",value:function(){return this.state.nameInput.hasError||this.state.typeInput.hasError||this.state.subredditInput.hasError?null:this.state}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{variant:"h6",gutterBottom:!0},"bot definition"),r.a.createElement(q.a,{container:!0,spacing:3},r.a.createElement(q.a,{item:!0,xs:12,sm:12},r.a.createElement(A.a,{required:!0,id:"botName",name:"botName",label:"bot name",fullWidth:!0,variant:"outlined",error:this.state.nameInput.hasError,helperText:this.state.nameInput.helperText,onChange:this.onNameInputChange,value:this.state.nameInput.val,InputProps:{startAdornment:r.a.createElement(_.a,{position:"start"},"/u/")}})),r.a.createElement(Y,null),r.a.createElement(q.a,{item:!0,xs:12},r.a.createElement(z.a,{required:!0,freeSolo:!0,multiple:!0,selectOnFocus:!0,onChange:this.onSubredditInputChange,options:K,renderTags:function(e,a){return e.map((function(e,t){return r.a.createElement(R.a,Object.assign({variant:"outlined",label:"/r/"+e},a({index:t})))}))},renderInput:function(a){return r.a.createElement(A.a,Object.assign({},a,{variant:"outlined",label:"subreddits",error:e.state.subredditInput.hasError}))}}),r.a.createElement(E.a,{variant:"caption",display:"block",color:"textSecondary",gutterBottom:!0},this.state.subredditInput.helperText))))}}]),a}(r.a.Component),K=["botsasaservice_test"],Q=t(5),V=t(217),X=t(192),Z=t(194),ee=t(193),ae=t(195),te=t(196),ne=t(220),re=t(213),le=t(191),ce=function(e){function a(e){var t;return Object(I.a)(this,a),t=Object(T.a)(this,Object(B.a)(a).call(this,e)),void 0===e.payload||e.payload==={}?t.state={alertShown:!1,fandom:{hasError:!1,isEnabled:!1,isAvailable:!0,invocation:{symbol:"!",term:"fandom",query:"[[ ]]"},inputs:{fandom_name:{isErrored:!1,val:"baas"}}},translate:{hasError:!1,isEnabled:!1,isAvailable:!0,invocation:{symbol:"!",term:"translate",query:"[[ ]]"}},flights:{hasError:!1,isEnabled:!1,isAvailable:!1}}:t.state=e.payload,t.handleFandomSwitchToggle=t.handleFandomSwitchToggle.bind(Object(F.a)(t)),t.handleFandomIndicator=t.handleFandomIndicator.bind(Object(F.a)(t)),t.handleTranslateSwitchToggle=t.handleTranslateSwitchToggle.bind(Object(F.a)(t)),t.handleTranslateIndicator=t.handleTranslateIndicator.bind(Object(F.a)(t)),t.handleFandomTextInputOnChange=t.handleFandomTextInputOnChange.bind(Object(F.a)(t)),t}return Object(D.a)(a,e),Object(C.a)(a,[{key:"handleFandomSwitchToggle",value:function(e){e.stopPropagation();var a=Object.assign({},this.state);a.fandom.isEnabled=!this.state.fandom.isEnabled,a.alertShown=!a.translate.isEnabled&&!a.fandom.isEnabled,this.setState(a)}},{key:"handleFandomIndicator",value:function(e,a){if(null!==a){var t=Object.assign({},this.state);t.fandom.invocation.query=a,this.setState(t)}}},{key:"handleFandomTextInputOnChange",value:function(e){var a=e.target.value,t=Object.assign({},this.state);t.fandom.inputs.fandom_name.isErrored=0===a.length,t.fandom.inputs.fandom_name.val=a,t.fandom.hasError=0===a.length,this.setState(t)}},{key:"handleTranslateSwitchToggle",value:function(e){e.stopPropagation();var a=Object.assign({},this.state);a.translate.isEnabled=!this.state.translate.isEnabled,a.alertShown=!a.translate.isEnabled&&!a.fandom.isEnabled,this.setState(a)}},{key:"handleTranslateIndicator",value:function(e,a){if(null!==a){var t=Object.assign({},this.state);t.translate.invocation.query=a,this.setState(t)}}},{key:"returnDataOrNull",value:function(){if(this.state.fandom.isEnabled||this.state.translate.isEnabled)return this.state.fandom.hasError||this.state.translate.hasError?null:this.state;var e=Object.assign({},this.state);return e.alertShown=!0,this.setState(e),null}},{key:"render",value:function(){var e=this,a=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{variant:"h6",gutterBottom:!0},"services"),r.a.createElement(q.a,{container:!0,spacing:1},r.a.createElement(q.a,{item:!0,xs:12,md:12},r.a.createElement(le.a,{in:this.state.alertShown},r.a.createElement(re.a,{severity:"warning",onClick:function(){var a=Object.assign({},e.state);a.alertShown=!1,e.setState(a)}},"Your bot won't be cool without a service -- enable at least one!"))),r.a.createElement(q.a,{item:!0,xs:12,md:12},r.a.createElement(V.a,{expanded:this.state.fandom.isEnabled,disabled:!this.state.fandom.isAvailable,className:a.panelMain},r.a.createElement(X.a,{className:a.panelSummary,"aria-controls":"fandom-content",id:"fandom-header"},r.a.createElement(W.a,{"aria-label":"Acknowledge",className:a.heading,onClick:this.handleFandomSwitchToggle,onFocus:this.handleFandomSwitchToggle,control:r.a.createElement(ee.a,{checked:this.state.fandom.isEnabled,size:"small"}),label:"fandom"}),r.a.createElement(E.a,{className:a.secondaryHeading},"Search the input fandom and return the top results.")),r.a.createElement(Z.a,{className:a.panelDetails},r.a.createElement(q.a,{container:!0,spacing:3},r.a.createElement(q.a,{item:!0,xs:12,sm:12},r.a.createElement(A.a,{className:a.inputFields,label:"name",value:this.state.fandom.inputs.fandom_name.val,helperText:"the fandom subdomain, i.e.: [name].fandom.com",color:"primary",error:this.state.fandom.inputs.fandom_name.isErrored,required:!0,onChange:this.handleFandomTextInputOnChange,inputProps:{className:a.rightTextAlign,align:"right"},InputProps:{endAdornment:r.a.createElement(_.a,{position:"end"},".fandom.com")},variant:"outlined"})))),r.a.createElement(ae.a,null),r.a.createElement(Z.a,{className:a.panelDetails},r.a.createElement(q.a,{container:!0,spacing:1},r.a.createElement(q.a,{item:!0,xm:12,sm:12},r.a.createElement(ne.a,{hidden:!1,size:"small",value:this.state.fandom.invocation.query,exclusive:!0,onChange:this.handleFandomIndicator,"aria-label":"indicator selector"},r.a.createElement(te.a,{value:"[[ ]]","aria-label":"double square bracket"},"[[ ]]"),r.a.createElement(te.a,{value:"{{ }}","aria-label":"double curly brackets"},"{{ }}"),r.a.createElement(te.a,{value:"< >","aria-label":"right aligned"},"< >"))),r.a.createElement(q.a,{item:!0,xm:12,sm:12},r.a.createElement(E.a,{className:a.panelCaption,variant:"caption",display:"block"},"query indicator - an example invocation:"),r.a.createElement(E.a,{className:a.panelCaption,variant:"caption",display:"block"},r.a.createElement("code",null,this.state.fandom.invocation.symbol+this.state.fandom.invocation.term,this.state.fandom.invocation.query.replace(" ","search-term"))))))),r.a.createElement(V.a,{expanded:this.state.translate.isEnabled,disabled:!this.state.translate.isAvailable,className:a.panelMain},r.a.createElement(X.a,{className:a.panelSummary,"aria-controls":"translation-content",id:"translation-header"},r.a.createElement(W.a,{"aria-label":"Acknowledge",className:a.heading,onClick:this.handleTranslateSwitchToggle,onFocus:this.handleTranslateSwitchToggle,control:r.a.createElement(ee.a,{checked:this.state.translate.isEnabled,size:"small"}),label:"translation"}),r.a.createElement(E.a,{className:a.secondaryHeading},"Translate the parent post or comment to the target language.")),r.a.createElement(Z.a,{className:a.panelDetails},r.a.createElement(q.a,{container:!0,spacing:3},r.a.createElement(q.a,{item:!0,xs:12,sm:6},r.a.createElement(E.a,{variant:"caption"},"no inputs for this service")))),r.a.createElement(ae.a,null),r.a.createElement(Z.a,{className:a.panelDetails},r.a.createElement(q.a,{container:!0,spacing:1},r.a.createElement(q.a,{item:!0,xm:12,sm:12},r.a.createElement(ne.a,{hidden:!1,size:"small",value:this.state.translate.invocation.query,exclusive:!0,onChange:this.handleTranslateIndicator,"aria-label":"indicator selector"},r.a.createElement(te.a,{value:"[[ ]]","aria-label":"double square bracket"},"[[ ]]"),r.a.createElement(te.a,{value:"{{ }}","aria-label":"double curly brackets"},"{{ }}"),r.a.createElement(te.a,{value:"< >","aria-label":"right aligned"},"< >"))),r.a.createElement(q.a,{item:!0,xm:12,sm:12},r.a.createElement(E.a,{className:a.panelCaption,variant:"caption",display:"block"},"query indicator - an example invocation:"),r.a.createElement(E.a,{className:a.panelCaption,variant:"caption",display:"block"},r.a.createElement("code",null,this.state.translate.invocation.symbol+this.state.translate.invocation.term,this.state.translate.invocation.query.replace(" ","search-term"))))))),r.a.createElement(V.a,{expanded:this.state.flights.isEnabled,disabled:!this.state.flights.isAvailable,className:a.panelMain},r.a.createElement(X.a,{className:a.panelSummary,"aria-controls":"flights-content",id:"flights-header"},r.a.createElement(W.a,{"aria-label":"Acknowledge",className:a.heading,control:r.a.createElement(ee.a,{checked:this.state.flights.isEnabled,size:"small"}),label:"flights"}),r.a.createElement(E.a,{className:a.secondaryHeading},"Get flight data."))))))}}]),a}(r.a.Component),ie=Object(Q.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(16),color:e.palette.text.primary,flexGrow:1,verticalAlign:"baseline"},secondaryHeading:{fontSize:e.typography.pxToRem(16),color:e.palette.text.secondary,justifyContent:"flex-end",marginRight:"1rem"},panelMain:{backgroundColor:e.palette.background.default},panelSummary:{borderBottom:"2px solid rgba(0, 0, 0, .125)",marginBottom:-1},panelDetails:{padding:e.spacing(2)},panelCaption:{color:e.palette.text.secondary},rightTextAlign:{textAlign:"right"}}}))(ce),oe=t(200),se=t(202),me=t(198),ue=t(199),de=t(201),he=t(197);function pe(e){var a=e.props,t=e.name;return r.a.createElement(he.a,null,r.a.createElement(me.a,{component:"th",scope:"row"},t),r.a.createElement(me.a,null,r.a.createElement("ul",null,function(){if(void 0!==a.inputs)return Object.entries(a.inputs).map((function(e){var a=Object(d.a)(e,2),t=a[0],n=a[1];return r.a.createElement("li",{key:t},t,": ",n.val)}))}(),function(){if(void 0!==a.invocation)return r.a.createElement("li",null,"invocation:",r.a.createElement("code",null," "+a.invocation.symbol+a.invocation.term,a.invocation.query.replace(" ","search-term")))}())))}var be=function(e){function a(e){var t;return Object(I.a)(this,a),(t=Object(T.a)(this,Object(B.a)(a).call(this,e))).botData=e.payload,t.createServiceRow=t.createServiceRow.bind(Object(F.a)(t)),t}return Object(D.a)(a,e),Object(C.a)(a,[{key:"returnDataOrNull",value:function(){return this.botData}},{key:"createServiceRow",value:function(e){var a=Object(d.a)(e,2),t=a[0],n=a[1];if("object"==typeof n&&n.isEnabled)return r.a.createElement(pe,{key:t,props:n,name:t})}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{variant:"h5",gutterBottom:!0},"summary"),r.a.createElement(q.a,{container:!0,spacing:2},r.a.createElement(q.a,{item:!0,xs:4,sm:4},r.a.createElement(ue.a,{component:w.a},r.a.createElement(oe.a,{className:e.header,"aria-label":"simple table"},r.a.createElement("caption",null,"bot data"),r.a.createElement(de.a,null,r.a.createElement(he.a,null,r.a.createElement(me.a,null,r.a.createElement(E.a,{variant:"h5"},"key")),r.a.createElement(me.a,{align:"right"},r.a.createElement(E.a,{variant:"h5"},"value")))),r.a.createElement(se.a,null,r.a.createElement(he.a,null,r.a.createElement(me.a,{component:"th",scope:"row"},"name"),r.a.createElement(me.a,{align:"right"},this.botData[0].nameInput.val)),r.a.createElement(he.a,null,r.a.createElement(me.a,{component:"th",scope:"row"},"enabled for"),r.a.createElement(me.a,{align:"right"},"subreddits")),r.a.createElement(he.a,null,r.a.createElement(me.a,{component:"th",scope:"row"},"targets"),r.a.createElement(me.a,{align:"right"},this.botData[0].subredditInput.val.join(", "))))))),r.a.createElement(q.a,{item:!0,xs:8,sm:8},r.a.createElement(ue.a,{component:w.a},r.a.createElement(oe.a,{className:e.header,"aria-label":"simple table"},r.a.createElement("caption",null,"services data"),r.a.createElement(de.a,null,r.a.createElement(he.a,null,r.a.createElement(me.a,null,r.a.createElement(E.a,{variant:"h5"},"enabled services")),r.a.createElement(me.a,null,r.a.createElement(E.a,{variant:"h5"},"configurations")))),r.a.createElement(se.a,null,Object.entries(this.botData[1]).map(this.createServiceRow)))))))}}]),a}(r.a.Component),Ee=Object(Q.a)((function(e){return{header:{backgroundColor:e.palette.background.default},disabled:{backgroundColor:e.palette.text.disabled}}}))(be),ge=t(203),ve=t(188);function fe(e){var a=e.payload,t=r.a.useState(0),l=Object(d.a)(t,2),c=l[0],i=l[1],o=r.a.useState(!1),s=Object(d.a)(o,2),m=s[0],u=s[1],h=r.a.useState("oh no! an unknown error has occurred."),p=Object(d.a)(h,2),b=p[0],E=p[1],v=r.a.useState(!1),f=Object(d.a)(v,2),y=f[0],j=f[1];return Object(n.useEffect)((function(){setTimeout((function(){!function(){switch(c){case 0:case 1:i(c+1);break;case 2:y||(j(!0),fetch("https://us-central1-bots-as-a-service.cloudfunctions.net/create-bot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){i(c+1)})));break;case 3:i(c+1);break;case 4:j(!1);break;default:E("oh no! you have somehow escaped our lifecycle through mysterious means. please try again."),u(!0)}}()}),1e3)})),r.a.createElement(q.a,{container:!0,spacing:1},r.a.createElement(q.a,{item:!0,xs:12,sm:12},r.a.createElement(ve.a,{in:c>=0&&4!==c,timeout:500},r.a.createElement(ge.a,null))),r.a.createElement(q.a,{item:!0,xs:12,sm:12},r.a.createElement(ve.a,{in:c>=0,timeout:500},r.a.createElement(re.a,{severity:"info"},"we're bringing your bot to life. wow!"))),r.a.createElement(q.a,{item:!0,xs:12,sm:12},r.a.createElement(ve.a,{in:c>=1,timeout:500},r.a.createElement(re.a,{severity:"warning"},"gathering extra nuts and bolts..."))),r.a.createElement(q.a,{item:!0,xs:12,sm:12},r.a.createElement(ve.a,{in:c>=2,timeout:500},r.a.createElement(re.a,{severity:"warning"},"bribing our bot-maker bots..."))),r.a.createElement(q.a,{item:!0,xs:12,sm:12},r.a.createElement(ve.a,{in:c>=3,timeout:500},r.a.createElement(re.a,{severity:"warning"},"cutting the umbilical cable..."))),r.a.createElement(q.a,{item:!0,xs:12,sm:12},r.a.createElement(ve.a,{in:c>=4,timeout:500},r.a.createElement(re.a,{severity:"success",action:r.a.createElement(g.a,{color:"inherit",size:"small",href:"#/bots"},"GO SEE")},"congratulations, it's a bot! all done. "))),r.a.createElement(q.a,{item:!0,xs:12,sm:12},r.a.createElement(ve.a,{in:m,timeout:500},r.a.createElement(re.a,{severity:"error"},b))))}function ye(e){var a=e.payload;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{variant:"h5",gutterBottom:!0},"creating your bot"),r.a.createElement(E.a,{variant:"subtitle1"},r.a.createElement(fe,{payload:function(){var e=a,t=e[0].nameInput.val,n={name:t,auth:{username:"testing_dummy",password:"leo030811",user_agent:"baas/1.0",client_id:null,client_secret:null},services:[],status:{online:!1},subreddits:e[0].subredditInput.val,version_info:{description:"A cool bot!",name:e[0].nameInput.val,version:"1.0"}};return Object.entries(e[1]).map((function(e){var a=Object(d.a)(e,2),t=a[0],r=a[1];if("object"==typeof r&&r.isEnabled){var l={};switch(t){case"fandom":l.url="https://".concat(r.inputs.fandom_name.val,".fandom.com/");break;case"translate":l.default_language="english"}var c={service_name:t,invocation:r.invocation,language:"english",params:l};n.services.push(c)}return null})),{"bot-name":t,config:n}}()})))}var je=Object(h.a)((function(e){return{layout:Object(O.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:1e3,marginLeft:"auto",marginRight:"auto"}),paper:Object(O.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}})),Oe=["details","services","review","finished"];function ke(){var e=je(),a=r.a.useState(0),t=Object(d.a)(a,2),n=t[0],l=t[1],c=r.a.useState({}),i=Object(d.a)(c,2),o=i[0],s=i[1],m=r.a.createRef();return document.title="bots-as-a-service: create",r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null),r.a.createElement("main",{className:e.layout},r.a.createElement(w.a,{className:e.paper},r.a.createElement(E.a,{component:"h1",variant:"h4",align:"center"},"create-a-bot"),r.a.createElement(x.a,{activeStep:n,className:e.stepper},Oe.map((function(e){return r.a.createElement(S.a,{key:e},r.a.createElement(N.a,null,e))}))),r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,function(e,a,t){switch(e){case 0:return r.a.createElement($,{payload:t,ref:a});case 1:return r.a.createElement(ie,{payload:t,ref:a});case 2:return r.a.createElement(Ee,{payload:t,ref:a});case 3:return r.a.createElement(ye,{payload:t});default:throw new Error("Unknown step")}}(n,m,o[n]),r.a.createElement("div",{className:e.buttons},0!==n&&n!==Oe.length-1&&r.a.createElement(g.a,{onClick:function(){l(n-1)},className:e.button},"Back"),n!==Oe.length-1&&r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:function(){var e=m.current.returnDataOrNull();if(null!==e){o[n]=e;var a=n+1;if(a>=2){var t=Object.assign({},o);o[a]=t}s(o),l(n+1)}else console.log("didn't get any data; forcing stop.")},className:e.button},2===n?"submit":"next")))))))}var we=t(209),xe=t(208),Se=t(207),Ne=t(91),Ie=t.n(Ne),Ce=t(94),Te=t.n(Ce),Be=t(92),Fe=t.n(Be),De=t(93),qe=t.n(De),Ae=t(221),_e=t(206),Re=Object(h.a)((function(e){return{root:{width:"100%"},enabledBotSummary:{backgroundColor:e.palette.success.dark},header:{backgroundColor:e.palette.background.default},heading:{fontSize:e.typography.pxToRem(16),color:e.palette.text.primary,flexGrow:1,verticalAlign:"baseline"},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,justifyContent:"flex-end",marginRight:"1rem"},startButton:{color:e.palette.success.light},pauseButton:{color:e.palette.primary.light},deleteButton:{color:e.palette.error.dark},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function ze(e){var a=e.name,t=e.payload;return r.a.createElement(he.a,null,r.a.createElement(me.a,{component:"th",scope:"row"},a),r.a.createElement(me.a,null,r.a.createElement("ul",null,function(){if("object"===typeof t.params)return Object.entries(t.params).map((function(e){var a=Object(d.a)(e,2),t=a[0],n=a[1];return r.a.createElement("li",{key:t},t,": ",n)}))}(),function(){if(void 0!==t.invocation)return r.a.createElement("li",null,"invocation:",r.a.createElement("code",null," "+t.invocation.symbol+t.invocation.term,t.invocation.query.replace(" ","search-term")))}())))}function He(e){var a=e.payload,t=Re(),n=!a.status.online,l=r.a.useState(!1),c=Object(d.a)(l,2),i=c[0],o=c[1],s=r.a.useState({severity:"error",message:""}),m=Object(d.a)(s,2),u=m[0],h=m[1],p=r.a.useState(n?"disabled":"active"),b=Object(d.a)(p,2),v=b[0],f=b[1],y=r.a.useState(!1),j=Object(d.a)(y,2),O=j[0],k=j[1],x=!n,S=!x,N=x,I=function(e){e.text().then((function(a){h({severity:"error",message:"error! (".concat(e.status,"): ").concat(a)})})),o(!1)};return r.a.createElement(V.a,null,r.a.createElement(X.a,{expandIcon:r.a.createElement(Ie.a,null),className:n?null:t.enabledBotSummary,"aria-controls":a.name+"-content",id:a.name+"-header"},r.a.createElement(E.a,{className:t.heading},a.name),r.a.createElement(E.a,{className:t.secondaryHeading},v),r.a.createElement(ae.a,{orientation:"vertical",flexItem:!0})),r.a.createElement(Z.a,null,r.a.createElement(Ae.a,{className:t.backdrop,open:i},r.a.createElement(_e.a,{color:"inherit"})),r.a.createElement(q.a,{container:!0,spacing:2},r.a.createElement(q.a,{item:!0,xs:12,sm:12},r.a.createElement(le.a,{in:u.message.length>0},r.a.createElement(re.a,{onClose:function(e){e.preventDefault(),h({severity:"error",message:""})},severity:u.severity},u.message))),r.a.createElement(q.a,{item:!0,xs:4,sm:4},r.a.createElement(ue.a,{component:w.a},r.a.createElement(oe.a,{className:t.header,"aria-label":"simple table"},r.a.createElement("caption",null,"bot data"),r.a.createElement(de.a,null,r.a.createElement(he.a,null,r.a.createElement(me.a,null,r.a.createElement(E.a,{variant:"h6"},"key")),r.a.createElement(me.a,{align:"right"},r.a.createElement(E.a,{variant:"h6"},"value")))),r.a.createElement(se.a,null,r.a.createElement(he.a,null,r.a.createElement(me.a,{component:"th",scope:"row"},"name"),r.a.createElement(me.a,{align:"right"},a.name)),r.a.createElement(he.a,null,r.a.createElement(me.a,{component:"th",scope:"row"},"enabled for"),r.a.createElement(me.a,{align:"right"},"subreddits")),r.a.createElement(he.a,null,r.a.createElement(me.a,{component:"th",scope:"row"},"targets"),r.a.createElement(me.a,{align:"right"},a.subreddits.join(", "))))))),r.a.createElement(q.a,{item:!0,xs:8,sm:8},r.a.createElement(ue.a,{component:w.a},r.a.createElement(oe.a,{className:t.header,"aria-label":"simple table"},r.a.createElement("caption",null,"services data"),r.a.createElement(de.a,null,r.a.createElement(he.a,null,r.a.createElement(me.a,null,r.a.createElement(E.a,{variant:"h6"},"enabled services")),r.a.createElement(me.a,null,r.a.createElement(E.a,{variant:"h6"},"configurations")))),r.a.createElement(se.a,null,a.services.map((function(e){var a=e.service_name;return r.a.createElement(ze,{key:a,payload:e,name:a})})))))))),r.a.createElement(ae.a,null),r.a.createElement(Se.a,null,r.a.createElement(g.a,{className:t.startButton,onClick:function(e){e.preventDefault(),i||(o(!0),fetch("https://us-central1-bots-as-a-service.cloudfunctions.net/activate-bot",{method:"put",body:'{"id": "'.concat(a.name,'"}')}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){console.log(e),o(!1),h({severity:"success",message:"successfully activated bot. can take up to a minute to warm up and start."}),f("reload to see status"),k(!0)})).catch(I))},startIcon:r.a.createElement(Fe.a,null),disabled:O||x},"Start"),r.a.createElement(g.a,{className:t.pauseButton,onClick:function(e){e.preventDefault(),i||(o(!0),fetch("https://us-central1-bots-as-a-service.cloudfunctions.net/deactivate-bot",{method:"put",body:'{"id": "'.concat(a.name,'"}')}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){console.log(e),o(!1),h({severity:"success",message:"successfully deactivated bot."}),f("reload to see status"),k(!0)})).catch(I))},startIcon:r.a.createElement(qe.a,null),disabled:O||S},"Disable"),r.a.createElement(g.a,{className:t.deleteButton,onClick:function(e){e.preventDefault(),i||(o(!0),fetch("https://us-central1-bots-as-a-service.cloudfunctions.net/delete-bot",{method:"delete",body:'{"id": "'.concat(a.name,'"}')}).then((function(e){if(!e.ok)throw e;o(!1),h({severity:"success",message:"successfully deleted bot."}),f("reload to see status"),k(!0)})).catch(I))},startIcon:r.a.createElement(Te.a,null),disabled:O||N},"Delete")))}function Pe(){Object(n.useEffect)((function(){document.title="bots-as-a-service: bots",t||o||(s(!0),fetch("https://us-central1-bots-as-a-service.cloudfunctions.net/get-bots").then((function(e){return e.ok||(f({severity:"error",message:e.text}),l(!0),s(!1)),e.json()})).then((function(e){p(e.map((function(e){return r.a.createElement(He,{key:e.name,payload:e})}))),l(!0),f({severity:"error",message:""})})))}));var e=r.a.useState(!1),a=Object(d.a)(e,2),t=a[0],l=a[1],c=r.a.useState(!1),i=Object(d.a)(c,2),o=i[0],s=i[1],m=r.a.useState([]),u=Object(d.a)(m,2),h=u[0],p=u[1],b=r.a.useState({severity:"error",message:""}),g=Object(d.a)(b,2),v=g[0],f=g[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null),r.a.createElement(xe.a,null,r.a.createElement(E.a,{variant:"h3",gutterBottom:!0},"bots"),v.message.length>0?r.a.createElement(re.a,{severity:v.severity},v.message):null,t?h.length>0?h:r.a.createElement(E.a,{variant:"caption"},"no bots yet. create one!"):r.a.createElement(xe.a,null,r.a.createElement(re.a,{severity:"info"},"getting bot data..."),r.a.createElement(V.a,null,r.a.createElement(X.a,null,r.a.createElement(we.a,{animation:"wave",height:10,width:"30%"}))),r.a.createElement(V.a,null,r.a.createElement(X.a,null,r.a.createElement(we.a,{animation:"wave",height:10,width:"30%"}))),r.a.createElement(V.a,null,r.a.createElement(X.a,null,r.a.createElement(we.a,{animation:"wave",height:10,width:"30%"}))),r.a.createElement(V.a,null,r.a.createElement(X.a,null,r.a.createElement(we.a,{animation:"wave",height:10,width:"30%"}))),r.a.createElement(V.a,null,r.a.createElement(X.a,null,r.a.createElement(we.a,{animation:"wave",height:10,width:"30%"}))))))}function Ge(e){return r.a.createElement(s.a,{theme:e.theme},r.a.createElement(ke,null))}function Me(e){return r.a.createElement(s.a,{theme:e.theme},r.a.createElement(Pe,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement((function(){var e=Object(i.a)("(prefers-color-scheme: dark)"),a=r.a.useMemo((function(){return Object(o.a)({palette:{type:e?"dark":"light"}})}),[e]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{theme:a},r.a.createElement(f,null),r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/create"},r.a.createElement(Ge,{theme:a})),r.a.createElement(u.b,{path:"/bots"},r.a.createElement(Me,{theme:a})),r.a.createElement(u.b,{path:"/"},r.a.createElement(u.a,{to:"/bots"}))))),r.a.createElement(j,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[120,1,2]]]);
//# sourceMappingURL=main.8e59cbd1.chunk.js.map